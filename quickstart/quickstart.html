<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Minimal server apps in C# | Minimal APIs</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="Building APIs in C#">
    <meta name="theme-color" content="#d9C5C1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.c9c98798.css" as="style"><link rel="preload" href="/assets/js/app.c05769f8.js" as="script"><link rel="preload" href="/assets/js/2.9f025ea5.js" as="script"><link rel="preload" href="/assets/js/15.b307fcaf.js" as="script"><link rel="prefetch" href="/assets/js/10.777a77a2.js"><link rel="prefetch" href="/assets/js/11.7eba6f02.js"><link rel="prefetch" href="/assets/js/12.6b0412a9.js"><link rel="prefetch" href="/assets/js/13.f2ee2f0c.js"><link rel="prefetch" href="/assets/js/14.0be052b7.js"><link rel="prefetch" href="/assets/js/16.aa99d1c9.js"><link rel="prefetch" href="/assets/js/17.3df554bb.js"><link rel="prefetch" href="/assets/js/18.5c632b10.js"><link rel="prefetch" href="/assets/js/19.80bc5a77.js"><link rel="prefetch" href="/assets/js/3.d513ac0e.js"><link rel="prefetch" href="/assets/js/4.9914ac36.js"><link rel="prefetch" href="/assets/js/5.6be672ae.js"><link rel="prefetch" href="/assets/js/6.58b48595.js"><link rel="prefetch" href="/assets/js/7.c05cc930.js"><link rel="prefetch" href="/assets/js/8.ad7684d7.js"><link rel="prefetch" href="/assets/js/9.77e27d37.js">
    <link rel="stylesheet" href="/assets/css/0.styles.c9c98798.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="logo.png" alt="Minimal APIs" class="logo"> <span class="site-name can-hide">Minimal APIs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/quickstart/" class="nav-link router-link-active">
  Quickstart
</a></div><div class="nav-item"><a href="/tutorial/" class="nav-link">
  Tutorial
</a></div><div class="nav-item"><a href="https://github.com/Minimal-APIs/samples" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Samples
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://docs.microsoft.com/dotnet/core/tutorials/top-level-templates" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Microsoft Docs
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/quickstart/" class="nav-link router-link-active">
  Quickstart
</a></div><div class="nav-item"><a href="/tutorial/" class="nav-link">
  Tutorial
</a></div><div class="nav-item"><a href="https://github.com/Minimal-APIs/samples" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Samples
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://docs.microsoft.com/dotnet/core/tutorials/top-level-templates" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Microsoft Docs
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Quickstart</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/quickstart/" aria-current="page" class="sidebar-link">Introduction</a></li><li><a href="/quickstart/quickstart.html" aria-current="page" class="active sidebar-link">Minimal server apps in C#</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/quickstart/quickstart.html#your-app" class="sidebar-link">Your app</a></li><li class="sidebar-sub-header"><a href="/quickstart/quickstart.html#running-the-app" class="sidebar-link">Running the app</a></li><li class="sidebar-sub-header"><a href="/quickstart/quickstart.html#routes" class="sidebar-link">Routes</a></li><li class="sidebar-sub-header"><a href="/quickstart/quickstart.html#http-methods" class="sidebar-link">HTTP Methods</a></li><li class="sidebar-sub-header"><a href="/quickstart/quickstart.html#error-handling" class="sidebar-link">Error Handling</a></li><li class="sidebar-sub-header"><a href="/quickstart/quickstart.html#environments" class="sidebar-link">Environments</a></li><li class="sidebar-sub-header"><a href="/quickstart/quickstart.html#returning-html" class="sidebar-link">Returning HTML</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="minimal-server-apps-in-c"><a href="#minimal-server-apps-in-c" class="header-anchor">#</a> Minimal server apps in C#</h1> <p>To follow along with the steps in this quickstart, you'll need to install the following:</p> <ul><li><a href="https://dotnet.microsoft.com/download/dotnet" target="_blank" rel="noopener noreferrer">.NET 6 SDK<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>An integrated developer environment (IDE) such as, <a href="https://code.visualstudio.com/" target="_blank" rel="noopener noreferrer">VS Code<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> or <a href="https://visualstudio.microsoft.com/" target="_blank" rel="noopener noreferrer">Visual Studio<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p>Open a terminal such as <em>PowerShell</em>, <em>Command Prompt</em>, or <em>bash</em>. Run the following command to create your first app:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>dotnet new web --output MinimalApp
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>This will create a new directory with a few files to get you started:</p> <ol><li><em>Program.cs</em>: This is your first code file we will be editing for most of this guide.</li> <li><em>MinimalApp.csproj</em>: This is a project file that helps the <code>dotnet</code> command know how to run your code. We will ignore it for this guide as it has everything it needs already.</li> <li><em>appsettings.json</em>: This is a JSON configuration file with some initial settings for your app, we also will not be using these in this guide but you can use them to add your own settings like, for example, a connection string to get data from a database.</li></ol> <h2 id="your-app"><a href="#your-app" class="header-anchor">#</a> Your app</h2> <p>The <em>Program.cs</em> file looks like this:</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> builder <span class="token operator">=</span> WebApplication<span class="token punctuation">.</span><span class="token function">CreateBuilder</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> app <span class="token operator">=</span> builder<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&quot;Hello World!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>The preceding C# code:</p> <ul><li>Creates an app builder, which is used to configure the app. In this default example you aren't doing any configuration yet, so just build an <code>app</code> object. You use the builder to create an app and then you run the app, this is known as the <strong>builder pattern</strong>.</li> <li>Builds the <code>app</code> object from the <code>builder</code>. The <code>app</code> object is what we will use to route URLs to code.</li> <li>Calls <code>MapGet</code>, to map the <code>&quot;/&quot;</code> route (or URL) to the code — which returns <code>&quot;Hello World!&quot;</code>.</li> <li>Finally, calls <code>app.Run</code> to execute the app you configured in the previous lines. It's not until you call <code>Run</code> that your app will start and you can browse to URLs.</li></ul> <h2 id="running-the-app"><a href="#running-the-app" class="header-anchor">#</a> Running the app</h2> <p>To run the app, use the <code>dotnet run</code> command in your terminal from the same directory as the <em>Program.cs</em> file.</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> MinimalApp <span class="token operator">&amp;&amp;</span> dotnet run
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>You will see log output similar to the following:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>info: Microsoft.Hosting.Lifetime<span class="token punctuation">[</span><span class="token number">14</span><span class="token punctuation">]</span>
      Now listening on: https://localhost:5001
info: Microsoft.Hosting.Lifetime<span class="token punctuation">[</span><span class="token number">14</span><span class="token punctuation">]</span>
      Now listening on: http://localhost:5000
info: Microsoft.Hosting.Lifetime<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
      Application started. Press Ctrl+C to shut down.
info: Microsoft.Hosting.Lifetime<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
      Hosting environment: Development
info: Microsoft.Hosting.Lifetime<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>If you navigate to <code>https://localhost:5001</code> in a browser, you'll see the text <code>Hello World!</code> rendered as plaintext. The request exercises the <code>&quot;/&quot;</code> route which is mapped to the <code>&quot;Hello World!&quot;</code> code.</p> <details class="custom-block details"><summary>Click here if you see something different</summary> <p>If you haven't changed any code in the <em>Program.cs</em> and your app still fails to run, then there's likely a problem with the installation of <code>dotnet</code>. But there are a couple of common things you might see:</p> <ul><li>If you see an error saying <code>Couldn't find a project to run</code>, then you are probably in the wrong directory. Make sure your terminal is in the right place.</li> <li>If you see an error saying <code>Failed to bind to address https://127.0.0.1:5001: address already in use</code>, then you probably have another <code>dotnet run</code> command running on another terminal window. You can stop that app by pressing <code>CTRL + C</code>. You can only have one app listening on a given address on a computer. We will talk about how to change the URL your app is listening on a bit later.</li></ul></details> <h2 id="routes"><a href="#routes" class="header-anchor">#</a> Routes</h2> <p>When building a web application, you create meaningful URLs that execute your code. For example, going to the <code>/hello</code> route returns a &quot;Hello World!&quot; string and going to the <code>/todos</code> route returns all the <em>Todo</em> items. In your ASP.NET Core app, you should use the <code>Map{Verb}</code> — where the <code>{Verb}</code> is the HTTP verb for the endpoint being mapped to the code:</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/hello&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&quot;Hello World!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/todos&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Todo</span><span class="token punctuation">(</span><span class="token string">&quot;Learn about routing&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>If you run the app with the <code>/todos</code> route and view it in a browser, you'll see it's automatically converted the <code>Todo</code> item to JavaScript Object Notation (JSON).</p></div> <h3 id="route-variables"><a href="#route-variables" class="header-anchor">#</a> Route Variables</h3> <p>To use route variables, curly braces like <code>{id}</code> are used:</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/hello/{name}&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> name<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token interpolation-string"><span class="token string">$&quot;Hello </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">name</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>This endpoint will match URLs like <code>/hello/David</code> and would return <code>Hello David</code>. If you add this method to the ones shown earlier, navigating to <code>/hello</code> would return <code>Hello World!</code> as the two endpoints have different routes and match differently.</p> <div class="custom-block tip"><p class="custom-block-title">NOTE</p> <p>If you have two routes the same then your application will still run, but when you try to navigate to those routes you'll get an error like similar to the following:</p> <p><img src="https://user-images.githubusercontent.com/234688/128390787-b3ab9769-a0c4-4a67-9d16-716bc52b4416.png" alt="image"></p> <p>In this image, you have two <code>hello</code> routes and the framework can't tell which code you want it to run, so it throws an error. Remember that <code>hello/</code> and <code>hello</code> are the same as far as ASP.NET Core is concerned. The end slash doesn't make them different.</p></div> <h3 id="constraints"><a href="#constraints" class="header-anchor">#</a> Constraints</h3> <p>You can specify the type of a route variable by adding a constraint in the placeholder declaration such as: <code>/hello/{name:int}</code>. This changes the meaning of the route and navigating to <code>/hello/David</code> wouldn't match. However, if you navigate to <code>/hello/1</code>, that would match. This is because the <code>name</code> variable is constrained to be an <code>int</code>. There are many built-in types allowed and even the ability to specify custom constraints. For more information, see <a href="https://docs.microsoft.com/aspnet/core/fundamentals/routing?view=aspnetcore-5.0#route-constraint-reference" target="_blank" rel="noopener noreferrer">Route Constraints<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h2 id="http-methods"><a href="#http-methods" class="header-anchor">#</a> HTTP Methods</h2> <p>So far we've shown <code>MapGet</code>, which allows you to specify an HTTP <code>GET</code> action, which is what a browser sends when you go to a URL. But there are other HTTP methods you are likely to use, and other <code>Map</code> methods for those, such as <code>MapPost</code> and <code>MapPut</code>. The other <code>Map</code> methods work the same as <code>MapGet</code> that we've already explored, but respond to an HTTP <code>POST</code> or HTTP <code>PUT</code>, respectively. When you want to send data to the app, use <code>POST</code> and when you want to get data use <code>GET</code>. For more information, see <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods" target="_blank" rel="noopener noreferrer">HTTP request methods here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/hello&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&quot;Hello World!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/todos&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Todo</span><span class="token punctuation">(</span><span class="token string">&quot;Learn about routing&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">MapPost</span><span class="token punctuation">(</span><span class="token string">&quot;/todos&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Result<span class="token punctuation">.</span><span class="token function">Ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Notice that <code>MapPost</code> and <code>MapGet</code> in this example are using the same URL. That is because the different verbs can all use the same URL and ASP.NET Core will invoke the right code for you. This allows you to:</p> <ul><li>Create a URL for your todos.</li> <li>Use <code>GET</code> to get todos.</li> <li>Use <code>POST</code> to add a todo.</li></ul> <h2 id="error-handling"><a href="#error-handling" class="header-anchor">#</a> Error Handling</h2> <p>If you have an unexpected error in your code, ASP.NET Core automatically tries to show what went wrong — consider the following route:</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/oops&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">int</span><span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span><span class="token string">&quot;this is not an integer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>If you visit the <code>/oops</code> route in a browser, you'll see this:</p> <p><img src="/quickstart-1/formatexception.png" alt="FormatException page."></p> <p>Additionally, the following will appear in the terminal that called <code>dotnet run</code>:</p> <div class="language-bash line-numbers-mode"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br></div><pre class="language-bash"><code>$ dotnet run
Building<span class="token punctuation">..</span>.
info: Microsoft.Hosting.Lifetime<span class="token punctuation">[</span><span class="token number">14</span><span class="token punctuation">]</span>
      Now listening on: https://localhost:5001
info: Microsoft.Hosting.Lifetime<span class="token punctuation">[</span><span class="token number">14</span><span class="token punctuation">]</span>
      Now listening on: http://localhost:5000
info: Microsoft.Hosting.Lifetime<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
      Application started. Press Ctrl+C to shut down.
info: Microsoft.Hosting.Lifetime<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
      Hosting environment: Development
info: Microsoft.Hosting.Lifetime<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
      Content root path: <span class="token punctuation">..</span><span class="token punctuation">\</span>source<span class="token punctuation">\</span>repos<span class="token punctuation">\</span>MinimalApp
fail: Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
      An unhandled exception has occurred <span class="token keyword">while</span> executing the request.
      System.FormatException: Input string was not <span class="token keyword">in</span> a correct format.
         at System.Number.ThrowOverflowOrFormatException<span class="token punctuation">(</span>ParsingStatus status, TypeCode <span class="token builtin class-name">type</span><span class="token punctuation">)</span> <span class="token keyword">in</span> System.Private.CoreLib.dll:token 0x600155a+0x0
         at System.Int32.Parse<span class="token punctuation">(</span>String s<span class="token punctuation">)</span> <span class="token keyword">in</span> System.Private.CoreLib.dll:token 0x6001284+0x0
         at <span class="token operator">&lt;</span>Program<span class="token operator">&gt;</span>$.<span class="token operator">&lt;&gt;</span>c.<span class="token operator">&lt;&lt;</span>Main<span class="token operator">&gt;</span>$<span class="token operator">&gt;</span>b__0_3<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">in</span> <span class="token punctuation">..</span><span class="token punctuation">\</span>source<span class="token punctuation">\</span>repos<span class="token punctuation">\</span>MinimalApp<span class="token punctuation">\</span>Program.cs:line <span class="token number">12</span>
         at lambda_method4<span class="token punctuation">(</span>Closure , Object , HttpContext <span class="token punctuation">)</span>
         at Microsoft.AspNetCore.Http.RequestDelegateFactory.<span class="token operator">&lt;&gt;</span>c__DisplayClass29_0.<span class="token operator">&lt;</span>Create<span class="token operator">&gt;</span>b__0<span class="token punctuation">(</span>HttpContext httpContext<span class="token punctuation">)</span> <span class="token keyword">in</span> Microsoft.AspNetCore.Http.Extensions.dll:token 0x6000163+0x0
         at Microsoft.AspNetCore.Routing.EndpointMiddleware.Invoke<span class="token punctuation">(</span>HttpContext httpContext<span class="token punctuation">)</span> <span class="token keyword">in</span> Microsoft.AspNetCore.Routing.dll:token 0x60000a8+0x7b
      --- End of stack trace from previous location ---
         at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke<span class="token punctuation">(</span>HttpContext context<span class="token punctuation">)</span> <span class="token keyword">in</span> Microsoft.AspNetCore.Diagnostics.dll:token 0x60000aa+0x82
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>Both of these give you an idea of what's wrong. In this case, a string, which isn't a number, cannot be parsed as an <code>int</code>.</p> <h2 id="environments"><a href="#environments" class="header-anchor">#</a> Environments</h2> <p>In the screenshot above, you can see the terminal output saying <code>Hosting environment: Development</code>. This is controlled by the environment variable <code>ASPNETCORE_ENVIRONMENT</code>. If the <code>ASPNETCORE_ENVIRONMENT</code> is not set, then ASP.NET Core assumes the value is <code>Production</code>. When using <code>dotnet run</code> or editors like <em>VS Code</em> or <em>Visual Studio</em>, they will set the value to <code>Development</code>.</p> <p>The error handling page showed above only appears when the environment is <code>Development</code>. You can check the environment value yourself like this:</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>app<span class="token punctuation">.</span>Environment<span class="token punctuation">.</span><span class="token function">IsDevelopment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/devenv&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&quot;This can only be accessed when the app is running in development.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>You can set the environment variable to whatever value you want and add whatever logic you like to your app based on the environment.</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>app<span class="token punctuation">.</span>Environment<span class="token punctuation">.</span>EnvironmentName <span class="token operator">==</span> <span class="token string">&quot;Testing&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/testingenv&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&quot;Testing&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>The pre-defined values for environment are <code>Development</code>, <code>Staging</code>, and <code>Production</code>. <code>Development</code> is set by development time tooling like <code>dotnet run</code> and we assume that the environment is <code>Production</code> if it isn't set to anything. ASP.NET Core will add the error handling page to your app if the environment is <code>Development</code>.</p> <h3 id="model-binding"><a href="#model-binding" class="header-anchor">#</a> Model Binding</h3> <p>The most common way of accessing data in ASP.NET Core is to create classes and let ASP.NET Core fill them in for you:</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> builder <span class="token operator">=</span> WebApplication<span class="token punctuation">.</span><span class="token function">CreateBuilder</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> app <span class="token operator">=</span> builder<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/hello&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&quot;Hello World!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/todos&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Todo</span><span class="token punctuation">(</span><span class="token string">&quot;Learn about routing&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">MapPost</span><span class="token punctuation">(</span><span class="token string">&quot;/todos&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token class-name">Todo</span> todo<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> todo<span class="token punctuation">.</span>Item<span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token return-type class-name">record</span> <span class="token function">Todo</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> Item<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">bool</span></span> IsComplete <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>The <code>POST</code> code will send the name part of the given <code>todo</code> back to the caller. To see this in action, the following is a screen capture from <a href="https://www.thunderclient.io" target="_blank" rel="noopener noreferrer">Thunder Client<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> in VS Code:</p> <p><img src="/quickstart-1/thunder-client-example.png" alt="Example Thunder Client HTTP POST to the '/todos' route."></p> <p>ASP.NET Core will deserialize the JSON in the <code>body</code> of a request to a <code>Todo</code> object. It will also automatically convert any objects you return to JSON, like in the <code>GET</code> <code>/todos</code> route.</p> <h3 id="http-context"><a href="#http-context" class="header-anchor">#</a> HTTP Context</h3> <p>Another way of accessing request information is from the <code>HttpContext</code> object. ASP.NET Core creates an <code>HttpContext</code> for each request, and you can access it in your code like this:</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/hello/{name}&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token class-name">HttpContext</span> ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token interpolation-string"><span class="token string">$&quot;Hello </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">ctx<span class="token punctuation">.</span>Request<span class="token punctuation">.</span>RouteValues<span class="token punctuation">[</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">]</span></span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>In this code, you are accepting an <code>HttpContext</code> and using it to manually access the route value rather than letting ASP.NET Core automatically match it. In addition to the route values, the <code>HttpContext</code> has access to all request information, like the body and cookies. You can read from the request property of <code>HttpContext</code> and write to the <code>Response</code> property, which ASP.NET Core does for you in all of the examples before this one.</p> <h2 id="returning-html"><a href="#returning-html" class="header-anchor">#</a> Returning HTML</h2> <p>If you want to return HTML rather than JSON, you can use Razor syntax. ASP.NET Core uses a language called <a href="https://docs.microsoft.com/aspnet/core/razor-pages" target="_blank" rel="noopener noreferrer">Razor<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, which is a mix of C# and HTML to make authoring UI easier. To add Razor Pages support:</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> builder <span class="token operator">=</span> WebApplication<span class="token punctuation">.</span><span class="token function">CreateBuilder</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span>
builder<span class="token punctuation">.</span>Services<span class="token punctuation">.</span><span class="token function">AddRazorPages</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> app <span class="token operator">=</span> builder<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/todos&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Todo</span><span class="token punctuation">(</span><span class="token string">&quot;Learn about routing&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">MapPost</span><span class="token punctuation">(</span><span class="token string">&quot;/todos&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token class-name">Todo</span> todo<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> todo<span class="token punctuation">.</span>Item<span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">MapRazorPages</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token return-type class-name">record</span> <span class="token function">Todo</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> Item<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">bool</span></span> IsComplete <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>Then you can create a directory called <em>Pages</em> and a file named <em>Index.cshtml</em> with this content:</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>@page &quot;/page/route&quot;

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">font</span><span class="token punctuation">:</span> 3rem monospace<span class="token punctuation">;</span> <span class="token property">padding</span><span class="token punctuation">:</span> 2rem<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>
            We 💜 Minimal APIs!
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>Then if you run your application and navigate to <code>/page/route</code>, you should see your content:</p> <p><img src="/quickstart-1/razor-pages.png" alt="Razor Pages - rendered HTML in the browser."></p> <p>This is because <code>Index</code> is the name of the default URL that a browser will try to load. If you called your <code>.cshtml</code> file <code>SomethingElse.cshtml</code>, then you'd navigate to <code>/SomethingElse</code> to see the content.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/quickstart/" class="prev router-link-active">
        Introduction
      </a></span> <!----></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.c05769f8.js" defer></script><script src="/assets/js/2.9f025ea5.js" defer></script><script src="/assets/js/15.b307fcaf.js" defer></script>
  </body>
</html>
